---
name: git-history
description: 指定したプロジェクトパスのGitコミット履歴を取得し、ユーザー別にマークダウンファイルへ出力
allowed-tools: Bash, AskUserQuestion
---

# Gitコミット履歴取得・出力スキル

指定されたプロジェクトのGitリポジトリから特定ユーザーのコミット履歴を取得し、日本時間に変換してマークダウンファイルに出力する。

## 実行フロー

1. **パラメータ確認**: プロジェクトパスとユーザー名の取得
2. **リポジトリ検証**: 指定パスがGitリポジトリかどうか確認
3. **コミット履歴取得**: git logコマンドでユーザーのコミット履歴を抽出
4. **日時変換**: コミット日時を日本時間（JST, UTC+9）に変換
5. **マークダウン生成**: 履歴をマークダウンファイルに整形して出力
6. **並び替え**: コミット日時の昇順（古い順）で並び替え

## パラメータ

### 必須パラメータ
- **プロジェクトパス**: コミット履歴を取得したいGitリポジトリのパス
- **ユーザー名**: コミット履歴を取得したいGitユーザー名（部分一致も可能）

### オプションパラメータ
- **出力ファイル名**: デフォルトは `git-history-[ユーザー名]-[日付].md`
- **期間指定**: 特定期間のコミットのみ取得
- **最大件数**: 取得するコミット数の上限（デフォルト: 制限なし）

## ユーザーへの質問

コマンドを実行する前にAskUserQuestionで以下を確認する：

1. **プロジェクトパス**（必須）
2. **ユーザー名**（必須）
3. **期間指定**（オプション）
4. **最大件数**（オプション）

## Git Logコマンド仕様

```bash
cd [プロジェクトパス] && \
TZ=Asia/Tokyo git log \
  --author="[ユーザー名]" \
  --pretty=format:"%H|%an|%ae|%ad|%s|%b" \
  --date=iso \
  --numstat \
  --no-merges \
  --all
```

## 出力マークダウンフォーマット

```markdown
# Gitコミット履歴

**リポジトリ**: [プロジェクトパス]
**対象ユーザー**: [ユーザー名]
**取得日時**: [現在の日時（JST）]
**総コミット数**: [件数]

---

## コミット一覧（降順）

### 2024-10-14 13:45:23 JST
- **コミットハッシュ**: `abc123def456...`
- **作成者**: [ユーザー名] ([メールアドレス])
- **変更ファイル数**: 5ファイル（+120行, -45行）
- **メッセージ**: コミットメッセージの内容

---

## 統計情報

- **最新コミット**: [日時]
- **最古コミット**: [日時]
- **期間**: [日数]日間
- **平均コミット頻度**: [頻度]コミット/日
```

## 日時変換仕様

- **入力**: UTCまたはローカルタイムのGitコミット日時
- **出力**: 日本標準時（JST, UTC+9）
- **フォーマット**: `YYYY-MM-DD HH:MM:SS JST`

## 注意事項

- プロジェクトパスが正しいGitリポジトリであることを確認
- ユーザー名が正確であることを確認（大文字小文字を区別）
- 出力先ディレクトリに書き込み権限があることを確認
- メールアドレスが出力に含まれるため、公開する場合は適切に編集すること
